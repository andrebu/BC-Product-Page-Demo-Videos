<style>
	#ProductDetails .ProductTinyImageList ul li {
		border: 0 !important;
	}
	#ProductDetails .ProductTinyImageList ul li a,
	#videoDemoThumb .ProdVideoPlayBtn {
		box-sizing: border-box;
		border: 3px solid #f0efee !important;
		border-radius: 3px;
		-webkit-transition: border-color 137ms;
		-moz-transition: border-color 137ms;
		transition: border-color 137ms;
	}
	#ProductDetails .ProductTinyImageList ul li a:hover,
	#videoDemoThumb .ProdVideoPlayBtn:hover {
		border-color: #6ada78 !important;
	}
	#ProductDetails .ProductTinyImageList ul li .mt-active-selector,
	#ProductDetails .ProductTinyImageList ul li.mt-active-selector .ProdVideoPlayBtn {
		border-color: #6ada78 !important;
	}
/*
	#ProductDetails .ProductTinyImageList ul li#videoDemoThumb {
		display: none;
	}
*/
	@media screen and (max-width: 767px) {
		#ProductDetails .ProductTinyImageList ul li {
			margin: 0;			
			width: auto !important;     
			height: auto !important;
		}
		#ProductDetails .ProductTinyImageList ul li#videoDemoThumb {
/* 			display: none; */
			width: 100% !important;
			height: 100% !important;
        }
		#ProductDetails .ProductTinyImageList ul li a, 
		#videoDemoThumb .ProdVideoPlayBtn {
			border: 0;
			height: 100%;
			width: 100%;
		}
        #videoDemoBtn {
            display: block;
            right: 0px;
            top: 0px;
            opacity: 1;
        }
    }
</style>
<script type="text/javascript">
// Product Page Demo Videos
    $('<style type="text/css"> \
    /* Product Page Video CSS */\
    #videoDemoBtn {\
        width: 70px;\
        height: 73px;\
        border-radius: 60px;\
        position: absolute;\
        cursor: pointer;\
        z-index: 13;\
        display: none;\
        clip: rect(auto, auto, auto, auto);\
        background-color: #39B54A;\
    }\
    #videoDemoBtn.videoPlaying {\
        background-color: #e53b2c;\
    }\
    #videoDemoBtn .triangle {\
        width: 0px;\
        height: 0px;\
        left: 28px;\
        top: 12px;\
        position: absolute;\
        border-top: 8px solid transparent;\
        border-bottom: 10px solid transparent;\
        border-left: 16px solid #fff;\
        z-index: 1;\
        border-radius: 2px;\
        color: #fff;\
    }\
    #videoDemoBtn .triangle:after {\
        content: "Show Video";\
        position: absolute;\
        left: -28px;\
        top: 12px;\
        text-transform: uppercase;\
    }\
    #videoDemoBtn.videoPlaying .triangle {\
        border: 8px solid #fff;\
        left: 26px;\
        top: 12px; \
    }\
    #videoDemoBtn.videoPlaying .triangle:after {\
        content: "Hide Video";\
        left: -18px;\
    }\
    .ProductList li:hover #videoDemoBtn {\
        opacity: 1;\
    }\
    #productDemoVideo {\
        position: absolute;\
        top: 0;\
        left: 0;\
        width: 100%;\
    }\
    #productDemoVideo video {\
        height: 100%;\
        width: 100%;\
    }\
    .ProductDetailsGrid .productAttributeList {\
        /*     display: none; */\
    }\
    #videoDemoThumb {\
        cursor: pointer;\
    }\
    #videoDemoThumb .ProdVideoPlayBtn {\
        position: relative;\
        background-color: #39B54A;\
        height: 100%;\
        display: block;\
    }\
    #videoDemoThumb .triangle {\
        width: 0px;\
        height: 0px;\
        left: 18px;\
        top: 12px;\
        position: absolute;\
        border-top: 10px solid transparent !important;\
        border-bottom: 12px solid transparent !important;\
        border-left: 23px solid white!important;\
        z-index: 1;\
        border-radius: 2px;\
    }\
    /* Play Video Button */\
    #videoDemoThumb .triangle:after {\
        content:" Play \\A Video";\
        position: absolute;\
        left: -29px;\
        top: 18px;\
        color: #fff;\
        text-transform: uppercase;\
        white-space: pre;\
    }\
    /* Stop Video Button */\
    #videoDemoThumb.videoPlaying .ProdVideoPlayBtn {\
        background-color: #DD4B39;\
    }\
    #videoDemoThumb.videoPlaying .triangle {\
        border: 10px solid #fff !important;\
    }\
    #videoDemoThumb.videoPlaying .triangle:after {\
        content:" Stop \\A Video";\
        left: -17px;\
    }\
    </style>')
        .appendTo('head');

	/*     Existance checker function */
	$.fn.exists = function(callback) {
	    var args = [].slice.call(arguments, 1);
	    if (this.length) {
	        callback.call(this, args);
	    }
	    return this;
	};
	
	/*     Using ECF to check for Video Option Trigger, hiding it, and adding buttons */
	function checkForVideo() {
	    // Legacy -- remove obsolete HasDemoVideo trigger for products which haven't been updated yet
	    $("span:contains('HasDemoVideo')").exists(function() {
	        $(this).closest('.productAttributeRow').hide();
	    });
	    var productNumber = $('#productDetailsAddToCartForm').find('input[name=product_id]').attr('value');
	    $.ajax({
	        url: '/content/videos/' + productNumber + '.mp4',
	        type: 'HEAD',
	    }).success(function() {
	        var ProductThumb = $('.ProductThumb');
	        var ProductTinyImageList = $('.ProductTinyImageList ul');
	        ProductThumb.append('<span id="videoDemoBtn" class=""><div class="triangle"></div></span>');
	        $('#videoDemoThumb').css('display','block');
	    }).fail(function() {
		    console.log('This failed!');
		    MagicScroll.stop();
		    $('#videoDemoThumb').remove();
		    MagicScroll.start();
	    });
	};
	
	/*    Play/Stop button click triggering functionality */
	function playStopButton () {
		var productNumber = $('#productDetailsAddToCartForm').find('input[name=product_id]').attr('value');
		var videoContainer = '<div id="productDemoVideo">' +
			'<video id="demoVideo" class="video" preload autoplay loop autobuffer muted controls' + 
			'width="100%" height="100%" poster="/content/images/dankstop-loading-running-cat-wbg3.gif">' +
			'<source src="/content/videos/' + productNumber + '.mp4">' +
			'<source src="/content/videos/' + productNumber + '.ogv" type="video/ogg">' +
			'<p>Your browser does not support this video.  Please upgrade your browser!</p>' +
			'</video>' +
			'</div>';
        var playStopBtns = $('#videoDemoThumb, #videoDemoBtn');
        function playDemoVideo() {
			$('.magictoolbox-li a.mt-active-selector').addClass('previous-thumb');
			$('.magictoolbox-li a').removeClass('mt-active-selector');
			$('.ProductThumbImage, .MagicToolboxContainer').append(videoContainer);
			$('#productDemoVideo').hide();
			$(playStopBtns).addClass('videoPlaying mt-active-selector');
			$('#productDemoVideo').show();
			$('#productDemoVideo').css('height', $('.ProductThumbImage').height() + 'px');
		    $('.magictoolbox-li a').on('click', function(e) {
				$('.MagicThumb-swap.previous-thumb').removeClass('previous-thumb');
	            stopDemoVideo();
		    });
        }
	    function stopDemoVideo() {
			$(playStopBtns).removeClass('videoPlaying mt-active-selector');
			$('#productDemoVideo').remove();
	    }
	    $('#videoDemoThumb, #videoDemoBtn').on('click', function(e) {
			e.stopPropagation();
			if ($('#videoDemoThumb.videoPlaying')[0]) {
				$('.previous-thumb').addClass('mt-active-selector');
				$('.previous-thumb.mt-active-selector').removeClass('previous-thumb');
	            stopDemoVideo();
			} else {
				playDemoVideo();
			}
	    });
	};

	function productPageVideoInit() {
		checkForVideo();
		playStopButton();
	}

	$(window).load(function() {
		productPageVideoInit();
	});
</script>